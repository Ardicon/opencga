!define TEST_SYSTEM {slim}
!define pathName {dummyPath}

!3 Create Folder
!|Table: Rest Fixture | $baseURL |
| setBody | {  "directory": "true", "path" : "${pathName}", "parents" : "true"}|
| setHeader|Content-Type:application/json|
| POST | /v1/files/create?sid=$sessionId&study=$study ||Content-Type: application/json||
|let|folderId|js|response.jsonbody.response[0].result[0].id||
|let|directoryPath|js|response.jsonbody.response[0].result[0].uri||

!3 Get Directory Info
!|Table: Rest Fixture | $baseURL |
| GET | /v1/files/$folderId/info?sid=$sessionId ||Content-Type: application/json | jsonbody.error === ''  && jsonbody.response[0].result[0].id == '$folderId'|

!3 (Negative) Create File With Same Name as Directory
!|Table: Rest Fixture | $baseURL |
| setBody | {  "directory": "false", "path" : "${pathName}", "parents" : "false", "description" : "testing file", "content" :"data goes here"}|
| setHeader|Content-Type:application/json|
| POST | /v1/files/create?sid=$sessionId&study=$study |500|  Content-Type: application/json |  |

!3 Create File 
!|Table: Rest Fixture | $baseURL |
| setBody | {  "directory": "false", "path" : "${pathName}/file", "parents" : "false", "description" : "testing file", "content" :"data goes here"}|
| setHeader|Content-Type:application/json|
| POST | /v1/files/create?sid=$sessionId&study=$study |200|Content-Type: application/json||
|let|fileId|js|response.jsonbody.response[0].result[0].id||

#error message is correct but not the return code, sending 200 as of now
!3 (Negative) Create Folder with Existing Name
!|Table: Rest Fixture | $baseURL |
| setBody | {  "directory": "true", "path" : "${pathName}", "parents" : "true"}|
| setHeader|Content-Type:application/json|
| POST | /v1/files/create?sid=$sessionId&study=$study |500|  Content-Type: application/json ||

!3 Get File Info
!|Table: Rest Fixture | $baseURL |
| GET | /v1/files/$fileId/info?sid=$sessionId ||Content-Type: application/json|jsonbody.error === ''  && jsonbody.response[0].result[0].id == '$fileId'|

!3 Get ACL For Folder
!|Table: Rest Fixture | $baseURL |
| GET | /v1/files/$folderId/acl?sid=$sessionId ||Content-Type: application/json| jsonbody.error === ''  && jsonbody.response[0].id == '$folderId'|

!3 Get ACL For File
!|Table: Rest Fixture | $baseURL |
| GET | /v1/files/$fileId/acl?sid=$sessionId ||Content-Type: application/json| jsonbody.error === ''  && jsonbody.response[0].id == '$fileId'|

!3 Get File Tree
!|Table: Rest Fixture | $baseURL |
| GET | /v1/files/$folderId/tree?sid=$sessionId&maxDepth=5 ||Content-Type: application/json|jsonbody.error === '' && jsonbody.response[0].numResults > '0' |

!3 Create Sample 1
!|Table: Rest Fixture | $baseURL |
| setBody | {"name" : "sample1" }|
| setHeader|Content-Type:application/json|
| POST | /v1/samples/create?sid=$sessionId&study=$study |200|Content-Type: application/json||
|let|sampleId|js|response.jsonbody.response[0].result[0].id||

!3 Create Sample 2
!|Table: Rest Fixture | $baseURL |
| setBody | {"name" : "sample2" }|
| setHeader|Content-Type:application/json|
| POST | /v1/samples/create?sid=$sessionId&study=$study |200|  Content-Type: application/json ||
|let|sampleId2|js|response.jsonbody.response[0].result[0].id||

!3 Update File 
!|Table: Rest Fixture | $baseURL |
| setBody |{ "samples" : "$sampleId,$sampleId2"}|
| setHeader|Content-Type:application/json|
| POST | /v1/files/$fileId/update?sid=$sessionId&study=$study |200|Content-Type: application/json|jsonbody.error === '' && jsonbody.response[0].result[0].sampleIds[0] == $sampleId && jsonbody.response[0].result[0].sampleIds[1] == $sampleId2|

!3 (Negative) Update File With Same Sample Twice
!|Table: Rest Fixture | $baseURL |
| setBody |{ "samples" : "$sampleId,$sampleId"}|
| setHeader|Content-Type:application/json|
| POST | /v1/files/$fileId/update?sid=$sessionId&study=$study |500|Content-Type: application/json||
