
################################################################################
#' OperationClient methods
#' @include commons.R

#' @description This function implements the OpenCGA calls for managing Operation
#' @param OpencgaR an object OpencgaR generated using initOpencgaR and/or opencgaLogin
#' @seealso \url{https://github.com/opencb/opencga/wiki} and the RESTful API documentation
#' \url{http://bioinfo.hpc.cam.ac.uk/opencga/webservices/}
#' @export


setMethod("operationClient", "OpencgaR", function(OpencgaR, action, params=NULL, ...) {
    category <- "operation"
    switch(action,
        # Endpoint: /{apiVersion}/operation/variant/aggregate
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param data: Variant aggregate params.
        aggregateVariant=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL, subcategory="variant",
                subcategoryId=NULL, action="aggregate", params=params, httpMethod="POST", as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/annotation/delete
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param project: Project [user@]project where project can be either the ID or the alias.
        # @param annotationId: Annotation identifier.
        deleteVariantAnnotation=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/annotation", subcategoryId=NULL, action="delete", params=params,
                httpMethod="DELETE", as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/annotation/index
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param project: Project [user@]project where project can be either the ID or the alias.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param data: Variant annotation index params.
        indexVariantAnnotation=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/annotation", subcategoryId=NULL, action="index", params=params, httpMethod="POST",
                as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/annotation/save
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param project: Project [user@]project where project can be either the ID or the alias.
        # @param data: Variant annotation save params.
        saveVariantAnnotation=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/annotation", subcategoryId=NULL, action="save", params=params, httpMethod="POST",
                as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/configure
        # @param project: Project [user@]project where project can be either the ID or the alias.
        # @param data: Configuration params to update.
        configureVariant=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL, subcategory="variant",
                subcategoryId=NULL, action="configure", params=params, httpMethod="POST", as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/family/aggregate
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param data: Variant aggregate family params.
        aggregateVariantFamily=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/family", subcategoryId=NULL, action="aggregate", params=params, httpMethod="POST",
                as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/family/genotype/index
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param data: Variant family index params.
        indexFamilyGenotype=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/family/genotype", subcategoryId=NULL, action="index", params=params,
                httpMethod="POST", as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/sample/genotype/index
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param data: Variant sample index params.
        indexSampleGenotype=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/sample/genotype", subcategoryId=NULL, action="index", params=params,
                httpMethod="POST", as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/score/delete
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param name: Unique name of the score within the study.
        # @param resume: Resume a previously failed remove.
        # @param force: Force remove of partially indexed scores.
        deleteVariantScore=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/score", subcategoryId=NULL, action="delete", params=params, httpMethod="DELETE",
                as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/score/index
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param data: Variant score index params. scoreName: Unique name of the score within the study. cohort1: Cohort used to compute the score. Use the cohort 'ALL' if all samples from the study where used to compute the score. cohort2: Second cohort used to compute the score, typically to compare against the first cohort. If only one cohort was used to compute the score, leave empty. inputColumns: Indicate which columns to load from the input file. Provide the column position (starting in 0) for the column with the score with 'SCORE=n'. Optionally, the PValue column with 'PVALUE=n'. The, to indicate the variant associated with the score, provide either the columns ['CHROM', 'POS', 'REF', 'ALT'], or the column 'VAR' containing a variant representation with format 'chr:start:ref:alt'. e.g. 'CHROM=0,POS=1,REF=3,ALT=4,SCORE=5,PVALUE=6' or 'VAR=0,SCORE=1,PVALUE=2'. resume: Resume a previously failed indexation.
        indexVariantScore=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/score", subcategoryId=NULL, action="index", params=params, httpMethod="POST",
                as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/secondaryIndex
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param project: Project [user@]project where project can be either the ID or the alias.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param data: Variant secondary index params.
        secondaryIndexVariant=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL, subcategory="variant",
                subcategoryId=NULL, action="secondaryIndex", params=params, httpMethod="POST", as.queryParam=NULL, ...),
        # Endpoint: /{apiVersion}/operation/variant/secondaryIndex/delete
        # @param jobId: Job ID. It must be a unique string within the study. An id will be autogenerated automatically if not provided.
        # @param jobDescription: Job description.
        # @param jobDependsOn: Comma separated list of existing job ids the job will depend on.
        # @param jobTags: Job tags.
        # @param study: Study [[user@]project:]study where study and project can be either the ID or UUID.
        # @param samples: Samples to remove. Needs to provide all the samples in the secondary index.
        deleteVariantSecondaryIndex=fetchOpenCGA(object=OpencgaR, category=category, categoryId=NULL,
                subcategory="variant/secondaryIndex", subcategoryId=NULL, action="delete", params=params,
                httpMethod="DELETE", as.queryParam=NULL, ...),
    )
})